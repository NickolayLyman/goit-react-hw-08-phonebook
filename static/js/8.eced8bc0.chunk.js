(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[8],{314:function(e,t,n){"use strict";n.r(t);var r=n(141),a=n(0),c=n(13),o=n(26),i=n(125),s=n(44),u=n(23),b=n.n(u),l=n(33),d=n(28),f=n.n(d),j=n(12),p={fetchContacts:function(){return function(){var e=Object(l.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(j.i)()),e.prev=1,e.next=4,f.a.get("/contacts");case 4:return n=e.sent,r=n.data,e.abrupt("return",t(Object(j.j)(r)));case 9:e.prev=9,e.t0=e.catch(1),t(Object(j.h)(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},addContact:function(e){return function(){var t=Object(l.a)(b.a.mark((function t(n){var r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(j.b)()),t.prev=1,t.next=4,f.a.post("/contacts",e);case 4:return r=t.sent,a=r.data,t.abrupt("return",n(Object(j.c)(a)));case 9:t.prev=9,t.t0=t.catch(1),n(Object(j.a)(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},deleteContact:function(e){return function(){var t=Object(l.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(j.f)()),t.prev=1,t.next=4,f.a.delete("/contacts/".concat(e));case 4:return t.abrupt("return",n(Object(j.g)(e)));case 7:t.prev=7,t.t0=t.catch(1),n(Object(j.e)(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}},m=n(37),g=function(e){return e.contacts.items},h=function(e){return e.contacts.filter},O={getContacts:g,getFilter:h,getVisibleContacts:Object(m.a)([g,h],(function(e,t){return function(e){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}(e)})),getErrorMessage:function(e){return e.contacts.error},getLoading:function(e){return e.contacts.isLoading}},x=n(168),v=n(140),A=n(31),C=n(2),k=x.a().shape({name:x.b().required("First name is a required field"),number:x.b().min(10,"The phone number must be 10 characters long.").max(13,"The phone number must be 13 characters long.").required("Phone number is a required field")}),w=Object(o.a)({form:{padding:40,fontSize:16,display:"flex",flexDirection:"column",backgroundColor:"#FFFFFF",borderRadius:7,opacity:.8,backdropFilter:"blur(100px)",border:"1px solid #A52A2A"},btn:{marginTop:10,height:30,backgroundColor:"#A52A2A",color:"#fff",padding:5,borderRadius:7,fontWeight:500,border:"1px solid #A52A2A","&:hover":{color:"#A52A2A",backgroundColor:"#fff",border:"1px solid #A52A2A",fontWeight:800}}}),y={name:"",number:""},F=function(e){var t=e.onClose,n=Object(c.b)(),r=Object(c.c)(O.getContacts),a=w();return Object(C.jsx)(i.c,{initialValues:y,validationSchema:k,onSubmit:function(e,a){var c=e.name,o=e.number,i=a.resetForm,s=a.setSubmitting;!function(e){if(r.some((function(t){return t.name===e.name})))return A.b.warn("This contact alredy exist");n(p.addContact(e)),t()}({name:c,number:o}),s(!1),i()},children:Object(C.jsxs)(i.b,{className:a.form,children:[Object(C.jsx)(i.a,{component:v.a,type:"text",name:"name",label:"Name",variant:"outlined",margin:"dense"}),Object(C.jsx)(i.a,{component:v.a,type:"tel",name:"number",label:"Number",variant:"outlined",margin:"dense"}),Object(C.jsx)(s.a,{type:"submit",value:"Create contact",className:a.btn})]})})},N=Object(o.a)({listItem:{display:"flex",justifyContent:"space-between",marginBottom:10,paddingLeft:10,paddingRight:10},number:{fontStyle:"italic"},btn:{marginLeft:20,width:70,backgroundColor:"#A52A2A",color:"#fff",padding:4,borderRadius:7,fontWeight:600,border:"1px solid #A52A2A","&:hover":{color:"#A52A2A",backgroundColor:"#fff",border:"1px solid #A52A2A",fontWeight:600}}}),R=function(){var e=Object(c.b)(),t=N();Object(a.useEffect)((function(){e(p.fetchContacts())}),[e]);var n=Object(c.c)(O.getVisibleContacts);return Object(C.jsx)("ul",{children:n.map((function(n){var r=n.id,a=n.name,c=n.number;return Object(C.jsxs)("li",{className:t.listItem,children:[Object(C.jsxs)("span",{children:[a,":"]}),Object(C.jsx)("span",{className:t.number,children:c}),Object(C.jsx)(s.a,{type:"button",className:t.btn,onClick:function(){return function(t){e(p.deleteContact(t))}(r)},value:"Delete"})]},r)}))})},L=n(17),S=function(e){var t=Object.assign({},e),n=Object(c.c)(O.getFilter),r=Object(c.b)();return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("input",Object(L.a)(Object(L.a)({},t),{},{name:"name",type:"text",value:n,onChange:function(e){return r(Object(j.d)(e.target.value))}}))})},E=n(29),T=document.querySelector("#modal-root"),W=Object(o.a)({Overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1200},modal:{position:"relative",backgroundColor:"aliceblue",borderRadius:15}}),q=function(e){var t=e.onClose,n=e.children,r=W();Object(a.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}}));var c=function(e){"Escape"===e.code&&t()};return Object(E.createPortal)(Object(C.jsx)("div",{className:r.Overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(C.jsx)("div",{className:r.modal,children:n})}),T)},I=n(47),V=n.p+"static/media/contacts-bg.31b5334e.jpg",z=Object(o.a)({container:{display:"flex",paddingTop:60,height:700,backgroundSize:"cover",backgroundRepeat:"no-repeat",color:"black",justifyContent:"center"},wrapper:{textAlign:"center",padding:10,width:500,height:400,backgroundColor:"#fff",borderRadius:7,opacity:.8,overflow:"auto",backdropFilter:"blur(100px)",border:"1px solid #A52A2A"},btn:{margin:20,backgroundColor:"#A52A2A",color:"#fff",padding:7,borderRadius:7,fontWeight:700,border:"1px solid #A52A2A","&:hover":{color:"#A52A2A",backgroundColor:"#fff",border:"1px solid #A52A2A",fontWeight:700}},filter:{margin:15,borderRadius:7}});t.default=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(c.c)(O.getContacts),u=function(){return o(!n)},b=Object(c.c)(O.getVisibleContacts),l=Object(c.b)(),d=z();return Object(a.useEffect)((function(){l(p.fetchContacts())}),[l]),Object(C.jsx)(I.a,{className:d.container,style:{backgroundImage:"url(".concat(V,")")},children:Object(C.jsxs)("div",{className:d.wrapper,children:[Object(C.jsx)("h1",{children:"Phonebook"}),Object(C.jsx)(s.a,{onClick:u,value:"Add  contact",className:d.btn}),n&&Object(C.jsx)(q,{onClose:u,children:Object(C.jsx)(F,{onClose:u})}),Object(C.jsx)("h2",{children:"Contacts"}),i.length>1&&Object(C.jsx)(S,{className:d.filter}),b.length>0&&Object(C.jsx)(R,{})]})})}}}]);
//# sourceMappingURL=8.eced8bc0.chunk.js.map